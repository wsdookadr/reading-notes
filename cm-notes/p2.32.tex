\documentclass[10pt]{article}
\usepackage[a4paper, total={6in, 8in}]{geometry}
\usepackage{amsmath,amscd,amssymb,amsmath,amsthm,amsfonts}
\usepackage{multicol,multirow}
\usepackage{spverbatim}
\usepackage{calc}
\usepackage{ifthen}
\usepackage{tikz-cd}
\usepackage{titlesec}
\usepackage[colorlinks=true,citecolor=blue,linkcolor=blue]{hyperref}
\usepackage{custommacros}

\voffset = -3cm
\headheight = 0pt
\hoffset = -2cm
\marginparwidth = 0pt
\setlength{\textheight}{0.95 \paperheight}
%\setlength{\linewidth}{0.9 \paperwidth}
%\setlength{\textwidth}{0.95 \paperwidth}

\pagestyle{empty}
\begin{document}
	
\everymath{\displaystyle}


\def\xt{\floor{\frac{x}{2}}}
\def\xp{\floor{\frac{x-1}{2}}}

\textbf{Problem 2.32}\\

Prove that

$\sum_{k\geq 0} \min(k,\monus{x}{k}) = \sum_{k\geq 0} (\monus{x}{(2k+1)}) \quad \forall x\in \mathbb{R}^+$\\

where $\monus{a}{b} = \max(0,a-b)$\\

$\sum_{k\geq 0} A_k = \sum_{k\geq 0} B_k$\\

Derivation using Iverson brackets:

$
\begin{array}{ll}
& \max(0,\monus{x}{k}) = 0 [0 > x-k] + (x-k)[x-k\geq 0] = (x-k)[x-k\geq 0] \\\\
A_k & = \min(k,\monus{x}{k}) \\
&  = \min(k,\max(0,x-k)) \\
&  = k [k < \max(0,x-k) ] + \max(0,x-k) [k\geq \max(0,x-k) ] = \\
&  = k [k < (x-k)[x-k\geq 0] ] + (x-k)[x-k\geq 0][k\geq (x-k)[x-k\geq 0] ] \\
\end{array}
$\\

Case I $x-k\geq 0$ \\

$
\begin{array}{ll}
A_k & = k \left[ k < x-k \right] + (x-k)[x-k\geq 0]\left[k \geq x-k \right]   \\
  & = k \left[ k < \floor{\frac{x}{2}} \right] + (x-k)[x-k\geq 0]\left[k\geq \floor{\frac{x}{2}} \right]   \\
  & = k \left[ k < \floor{\frac{x}{2}} \right] + (x-k)\left[k\geq \floor{\frac{x}{2}} \right] \\
\end{array}
$

Case II $x-k<0$ \\

$A_k = k [k < 0] + (x-k)\cdot 0 \cdot [k\geq 0] = 0$

$
A_k = 
\left\{
\begin{array}{ll}
	0 & , k > x\\
	k & , 0 \leq k < \floor{\frac{x}{2}} \\
	x-k & , \floor{\frac{x}{2}} \leq k \leq 2\xt - 1\\
\end{array}
\right.
$\\

The upper bound in the last branch above is the largest integer $k$ that doesn't exceed $x$ (if it did we'd be in the 1st branch instead, and all branches need to be disjoint).\\

$
\begin{array}{ll}
B_k & = \monus{x}{(2k+1)} = \max(0,x-2k-1) \\
    & = (x-2k-1)[x-2k-1\geq 0] \\
    & = (x-2k-1) \left[k \leq \floor{\frac{x-1}{2} } \right]\\
\end{array}
$

$
B_k = 
\left\{
\begin{array}{ll}
	0 & , k > \floor{\frac{x-1}{2} } \\
	x-2k-1 & , 0 \leq k \leq \floor{\frac{x-1}{2} }  \\
\end{array}
\right.
$\\


Suppose $2n\leq x < 2n+1 \implies \xt = n , \xp = n-1$\\

$
\begin{array}{ll}\\
\sum_{k\geq 0} A_k & = \sum_{0\leq k < \xt} k +  \sum_{\xt \leq k \leq 2\xt - 1} (x-k) \\
& = \sum_{0\leq k \leq n-1} k +  \sum_{n \leq k \leq 2n - 1} (x-k) \\
& = \sum_{0\leq k \leq n-1} k +  \sum_{0 \leq k \leq n-1} (x-k-n) \\
& = \sum_{0\leq k \leq n-1} (k + x - k - n) \\
& = \sum_{0\leq k \leq n-1} (x - n) = n(x-n)\\
\end{array}
$

$
\begin{array}{l}\\
\sum_{k\geq 0} B_k = \sum_{0 \leq k \leq \xp} (x-2k-1) = \sum_{0 \leq k \leq n-1} x  -2\sum_{0 \leq k \leq n-1} k - \sum_{0 \leq k \leq n-1} 1 = \\
xn -n(n-1)-n = xn-n^2 + n -n = xn-n^2=n(x-n)
\end{array}
$
\\\\
TODO: Case $2n-1\leq x < 2n$

\end{document}


